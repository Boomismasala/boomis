<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cart - Boomis Homemade Masala</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    .cart-container {
  max-width: 800px;
  margin: 60px auto;
  padding: 20px;
  background: #fff8f0;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  font-family: 'Open Sans', sans-serif;
}

.cart-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding: 15px;
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.cart-item h4 {
  margin: 0;
  font-size: 18px;
}

.cart-controls {
  display: flex;
  align-items: center;
  gap: 10px;
}

.cart-controls input {
  width: 50px;
  text-align: center;
  font-size: 16px;
  padding: 4px;
}

.cart-total {
  text-align: right;
  font-size: 20px;
  margin-top: 20px;
  font-weight: bold;
}

button.remove-item, .place-order-btn {
  background: #8B4000;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 20px;
  cursor: pointer;
  font-weight: bold;
  transition: background 0.3s;
}

button.remove-item:hover, .place-order-btn:hover {
  background: #a05200;
}

    body {
      font-family: 'Open Sans', sans-serif;
      max-width: 700px;
      margin: 20px auto;
      padding: 0 10px;
    }
    h1 {
      color: #8B4000;
      text-align: center;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f4e6d4;
      color: #8B4000;
    }
    input[type="number"] {
      width: 60px;
      padding: 5px;
      text-align: center;
    }
    button.remove-btn {
      background-color: #cc0000;
      color: white;
      border: none;
      padding: 6px 12px;
      cursor: pointer;
      border-radius: 4px;
    }
    button.remove-btn:hover {
      background-color: #ff3333;
    }
    #total-price {
      font-weight: bold;
      font-size: 1.2em;
      text-align: right;
      margin-top: 15px;
      color: #333;
    }
    #proceed-button {
      display: block;
      margin: 25px auto;
      padding: 12px 30px;
      background-color: #8B4000;
      color: white;
      border: none;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      border-radius: 25px;
      text-align: center;
      text-decoration: none;
      width: fit-content;
    }
    #proceed-button:hover {
      background-color: #a05200;
    }
    #empty-message {
      text-align: center;
      font-size: 1.1em;
      color: #777;
      margin-top: 40px;
    }
    a#back-to-shop {
      display: inline-block;
      margin-bottom: 20px;
      color: #8B4000;
      text-decoration: none;
      font-weight: bold;
    }
    a#back-to-shop:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<a href="index.html" id="back-to-shop">← Continue Shopping</a>

<h1>Your Cart</h1>

<div id="cart-container">
  <!-- Cart table will be injected here -->
</div>

<p id="total-price"></p>


  
  <div id="cart-items"></div>
<div id="cart-total"></div>
<button id="checkout-btn">Place Order</button>

<script>
  const cartContainer = document.getElementById('cart-container');
  const totalPriceElem = document.getElementById('total-price');
  const proceedButton = document.getElementById('proceed-button');

  // Load cart from localStorage
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  // Render cart table
  function renderCart() {
    if (cart.length === 0) {
      cartContainer.innerHTML = '<p id="empty-message">Your cart is empty.</p>';
      totalPriceElem.textContent = '';
      proceedButton.style.display = 'none';
      return;
    }

    let html = `
      <table>
        <thead>
          <tr>
            <th>Product</th>
            <th>Weight (g)</th>
            <th>Price (₹)</th>
            <th>Quantity</th>
            <th>Total (₹)</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody>
    `;

    cart.forEach((item, index) => {
      const itemTotal = item.price * item.quantity;
      html += `
        <tr data-index="${index}">
          <td>${item.name}</td>
          <td>${item.weight}</td>
          <td>${item.price.toFixed(2)}</td>
          <td>
            <input type="number" min="1" value="${item.quantity}" class="quantity-input" />
          </td>
          <td>${itemTotal.toFixed(2)}</td>
          <td>
            <button class="remove-btn">Remove</button>
          </td>
        </tr>
      `;
    });

    html += '</tbody></table>';

    cartContainer.innerHTML = html;
    updateTotalPrice();
    proceedButton.style.display = 'block';

    // Add event listeners for quantity changes
    const quantityInputs = document.querySelectorAll('.quantity-input');
    quantityInputs.forEach(input => {
      input.addEventListener('change', (e) => {
        const tr = e.target.closest('tr');
        const idx = parseInt(tr.getAttribute('data-index'), 10);
        let newQty = parseInt(e.target.value, 10);

        if (isNaN(newQty) || newQty < 1) {
          newQty = 1;
          e.target.value = 1;
        }

        cart[idx].quantity = newQty;
        saveCart();
        renderCart();
      });
    });

    // Add event listeners for remove buttons
    const removeButtons = document.querySelectorAll('.remove-btn');
    removeButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const tr = e.target.closest('tr');
        const idx = parseInt(tr.getAttribute('data-index'), 10);
        cart.splice(idx, 1);
        saveCart();
        renderCart();
      });
    });
  }

  function updateTotalPrice() {
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    totalPriceElem.textContent = `Total Price: ₹${total.toFixed(2)}`;
  }

  function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
  }

  // Proceed to Place Order
  proceedButton.addEventListener('click', () => {
    if (cart.length === 0) {
      alert('Your cart is empty!');
      return;
    }
    window.location.href = 'place-order.html';
  });

  // Initial render
  renderCart();
</script>

</body>
</html>
